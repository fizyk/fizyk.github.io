<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to configure smtp server to send emails from gtilab. This is not described nowhere within documentation, and it took me a while to configure this properly.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Configure gitlab with smtp mail server | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" hreflang="en" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" hreflang="pl" href="../../pl/rss.xml">
<link rel="canonical" href="http://blog.fizyk.net.pl/blog/configure-gitlab-with-smtp-mail-server/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Grzegorz Śliwiński">
<link rel="prev" href="../differences-between-django-and-pyramid-routing/" title="Differences between Django and Pyramid routing" type="text/html">
<link rel="next" href="../unicode-is-faster-than-decode/" title="unicode is faster than decode" type="text/html">
<meta property="og:site_name" content="Cases">
<meta property="og:title" content="Configure gitlab with smtp mail server">
<meta property="og:url" content="http://blog.fizyk.net.pl/blog/configure-gitlab-with-smtp-mail-server/">
<meta property="og:description" content="How to configure smtp server to send emails from gtilab. This is not described nowhere within documentation, and it took me a while to configure this properly.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-07-14T20:49:17+02:00">
<meta property="article:tag" content="gitlab">
<meta property="article:tag" content="howto">
<meta property="article:tag" content="smtp">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">Cases</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item"><a href="../../pl/" rel="alternate" hreflang="pl" class="nav-link">Polski</a></li>

                    
                    
    
    <li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="http://www.fizyk.net.pl/en" class="nav-link">Homepage</a>
                </li>
<li class="nav-item">
<a href="../../archive/" class="nav-link">Archives</a>
                </li>
<li class="nav-item">
<a href="../../tags/" class="nav-link">Tags</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Configure gitlab with smtp mail server</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Grzegorz Śliwiński
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2013-07-14T20:49:17+02:00" itemprop="datePublished" title="14 7 2013 20:49">14 7 2013 20:49</time></a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/2013-07-14-configure-gitlab-with-smtp-mail-server.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Probably one of the most desired features, when installing software to manage your git repository like <a class="reference external" href="http://gitlab.org/">gitlab</a>, is to allow notification emails to be send. It's not the most important, but nevertheless still quite useful. And while it might be clear to people that dealt before with ruby or ruby on rails applications, it wasn't for me, and gitlab documentation hasn't mentioned it anywhere... How to configure mail sending with smtp servers!?</p>
<!-- TEASER_END -->
<p>Took out some digging for me and Andrew, but finally found it, so here's short instructions on this topic (Should work on gitlab 5.2 and higher, haven't tried it on lower):</p>
<p>First, find your <strong>config/environments/production.rb</strong> file. Find lines that starts with <strong>config.action_mailer</strong>.</p>
<p>Make sure to have delivery_method set to smtp like that:</p>
<pre class="code ruby"><a id="rest_code_7655547e9b254c5aa85c2344688ea107-1" name="rest_code_7655547e9b254c5aa85c2344688ea107-1"></a><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">=</span> <span class="ss">:smtp</span>
</pre>
<p>Now find <strong>config/initializers/smtp_settings.rb</strong> (You might have it as smtp_settings.rb.sample). Here's how it should look line more or less, if setting up with gmail mailbox:</p>
<pre class="code ruby"><a id="rest_code_121e95d681354216a6c8d2a0389d9c89-1" name="rest_code_121e95d681354216a6c8d2a0389d9c89-1"></a><span class="k">if</span> <span class="no">Gitlab</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">==</span> <span class="ss">:smtp</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-2" name="rest_code_121e95d681354216a6c8d2a0389d9c89-2"></a>  <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="o">.</span><span class="n">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-3" name="rest_code_121e95d681354216a6c8d2a0389d9c89-3"></a>    <span class="ss">address</span><span class="p">:</span> <span class="s2">"smtp.gmail.com"</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-4" name="rest_code_121e95d681354216a6c8d2a0389d9c89-4"></a>    <span class="ss">port</span><span class="p">:</span> <span class="mi">587</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-5" name="rest_code_121e95d681354216a6c8d2a0389d9c89-5"></a>    <span class="ss">user_name</span><span class="p">:</span> <span class="s2">"yourgmail@gmail.com"</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-6" name="rest_code_121e95d681354216a6c8d2a0389d9c89-6"></a>    <span class="ss">password</span><span class="p">:</span> <span class="s2">"gmai_password"</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-7" name="rest_code_121e95d681354216a6c8d2a0389d9c89-7"></a>    <span class="ss">domain</span><span class="p">:</span> <span class="s2">"gmail_account_domain"</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-8" name="rest_code_121e95d681354216a6c8d2a0389d9c89-8"></a>    <span class="ss">authentication</span><span class="p">:</span> <span class="s1">'plain'</span><span class="p">,</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-9" name="rest_code_121e95d681354216a6c8d2a0389d9c89-9"></a>    <span class="ss">enable_starttls_auto</span><span class="p">:</span> <span class="kp">true</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-10" name="rest_code_121e95d681354216a6c8d2a0389d9c89-10"></a>  <span class="p">}</span>
<a id="rest_code_121e95d681354216a6c8d2a0389d9c89-11" name="rest_code_121e95d681354216a6c8d2a0389d9c89-11"></a><span class="k">end</span>
</pre>
<p>The <strong>domain</strong> parameter is applicable to Google Apps account, as these are using own domains usually. Don't remeber what do you need that to set if you use regular gmail account.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/gitlab/" rel="tag">gitlab</a></li>
            <li><a class="tag p-category" href="../../tags/howto/" rel="tag">howto</a></li>
            <li><a class="tag p-category" href="../../tags/smtp/" rel="tag">smtp</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../differences-between-django-and-pyramid-routing/" rel="prev" title="Differences between Django and Pyramid routing">Previous post</a>
            </li>
            <li class="next">
                <a href="../unicode-is-faster-than-decode/" rel="next" title="unicode is faster than decode">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="http://blog.fizyk.net.pl/blog/configure-gitlab-with-smtp-mail-server/",
        disqus_title="Configure gitlab with smtp mail server",
        disqus_identifier="cache/posts/2013-07-14-configure-gitlab-with-smtp-mail-server.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="casesblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2021 <a href="mailto:fizyk~~fizyk.net.pl">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
