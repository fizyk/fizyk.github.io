<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to configure smtp server to send emails from gtilab. This is not described nowhere within documentation, and it took me a while to configure this properly.">
<meta name="viewport" content="width=device-width">
<title>Configure gitlab with smtp mail server | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="../../pl/rss.xml">
<link rel="canonical" href="http://blog.fizyk.net.pl/blog/configure-gitlab-with-smtp-mail-server/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Configure gitlab with smtp mail server</a></h1>

        <div class="meta" style="background-color: rgb(234, 234, 234); ">
        <span class="authordate">
            Posted: <time class="published" datetime="2013-07-14T20:49:17+02:00">14 7 2013 20:49</time>
               [<a href="index.rst" id="sourcelink">Source</a>]
        </span>
        <br><span class="tags">Tags: 
                    <a class="tag" href="../../tags/gitlab/"><span>gitlab</span></a>
                    <a class="tag" href="../../tags/howto/"><span>howto</span></a>
                    <a class="tag" href="../../tags/smtp/"><span>smtp</span></a>
                </span>
                <br><span class="authordate">
            

        </span>
        </div>
    <div>
<p>Probably one of the most desired features, when installing software to manage your git repository like <a class="reference external" href="http://gitlab.org/">gitlab</a>, is to allow notification emails to be send. It's not the most important, but nevertheless still quite useful. And while it might be clear to people that dealt before with ruby or ruby on rails applications, it wasn't for me, and gitlab documentation hasn't mentioned it anywhere... How to configure mail sending with smtp servers!?</p>
<!-- TEASER_END -->
<p>Took out some digging for me and Andrew, but finally found it, so here's short instructions on this topic (Should work on gitlab 5.2 and higher, haven't tried it on lower):</p>
<p>First, find your <strong>config/environments/production.rb</strong> file. Find lines that starts with <strong>config.action_mailer</strong>.</p>
<p>Make sure to have delivery_method set to smtp like that:</p>
<pre class="code ruby"><a id="rest_code_efb88219a3cb43a4b041ca8465517dc4-1" name="rest_code_efb88219a3cb43a4b041ca8465517dc4-1"></a><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">=</span> <span class="ss">:smtp</span>
</pre>
<p>Now find <strong>config/initializers/smtp_settings.rb</strong> (You might have it as smtp_settings.rb.sample). Here's how it should look line more or less, if setting up with gmail mailbox:</p>
<pre class="code ruby"><a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-1" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-1"></a><span class="k">if</span> <span class="no">Gitlab</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">==</span> <span class="ss">:smtp</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-2" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-2"></a>  <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="o">.</span><span class="n">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-3" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-3"></a>    <span class="ss">address</span><span class="p">:</span> <span class="s2">"smtp.gmail.com"</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-4" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-4"></a>    <span class="ss">port</span><span class="p">:</span> <span class="mi">587</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-5" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-5"></a>    <span class="ss">user_name</span><span class="p">:</span> <span class="s2">"yourgmail@gmail.com"</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-6" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-6"></a>    <span class="ss">password</span><span class="p">:</span> <span class="s2">"gmai_password"</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-7" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-7"></a>    <span class="ss">domain</span><span class="p">:</span> <span class="s2">"gmail_account_domain"</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-8" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-8"></a>    <span class="ss">authentication</span><span class="p">:</span> <span class="s1">'plain'</span><span class="p">,</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-9" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-9"></a>    <span class="ss">enable_starttls_auto</span><span class="p">:</span> <span class="kp">true</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-10" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-10"></a>  <span class="p">}</span>
<a id="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-11" name="rest_code_6ca3b62ae76d46a7a37bbb51091b422f-11"></a><span class="k">end</span>
</pre>
<p>The <strong>domain</strong> parameter is applicable to Google Apps account, as these are using own domains usually. Don't remeber what do you need that to set if you use regular gmail account.</p>
</div>
    
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../differences-between-django-and-pyramid-routing/" rel="prev" title="Differences between Django and Pyramid routing">Previous post</a>
            </li>
            <li class="next">
                <a href="../unicode-is-faster-than-decode/" rel="next" title="unicode is faster than decode">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="http://blog.fizyk.net.pl/blog/configure-gitlab-with-smtp-mail-server/",
        disqus_title="Configure gitlab with smtp mail server",
        disqus_identifier="cache/posts/2013-07-14-configure-gitlab-with-smtp-mail-server.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </div>

        </div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="http://blog.fizyk.net.pl/" title="Cases">Cases</a>
            </h1>
            
            <small>
                Also available in: 
                
            <li><a href="http://blog.fizyk.net.pl/pl/" rel="alternate" hreflang="pl">Polski</a></li>

            </small>
            
            <ul class="unstyled">
<li>
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    <img alt="Licencja Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png"></a>
<br>Ten utwór, autorstwa
<span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">
    Grzegorz Śliwiński</span>
jest dostępny na licencji
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    Creative Commons Uznanie autorstwa 3.0 Unported
</a>.</li>
            
                <li>
<a href="http://www.fizyk.net.pl/en">Homepage</a>
                </li>
<li>
<a href="../../archive/">Archives</a>
                </li>
<li>
<a href="../../tags/">Tags</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2021 <a href="mailto:fizyk~~fizyk.net.pl">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
        </div>
    </div>
    
            <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
