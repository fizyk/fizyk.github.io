<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Deploying python packages with travis-ci | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="../../pl/rss.xml">
<link rel="canonical" href="http://blog.fizyk.net.pl/blog/deploying-python-packages-with-travis-ci/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Deploying python packages with travis-ci</a></h1>

        <div class="meta" style="background-color: rgb(234, 234, 234); ">
        <span class="authordate">
            Posted: <time class="published" datetime="2014-05-04T19:21:09+02:00">04 5 2014 19:21</time>
               [<a href="index.rst" id="sourcelink">Source</a>]
        </span>
        <br><span class="tags">Tags: 
                    <a class="tag" href="../../tags/pypi/"><span>pypi</span></a>
                    <a class="tag" href="../../tags/python/"><span>python</span></a>
                    <a class="tag" href="../../tags/travis/"><span>travis</span></a>
                </span>
                <br><span class="authordate">
            

        </span>
        </div>
    <div>
<p>Deploying applications is tedious, so is deployin packages, no matter the package repository.
For example after applying changes to codebase, the code needs to be tagged,
as to not loose the point of release from sight, after that the packages needs
to be built and uploaded. It's far too many commands that need to be done.
One might develop some deployment scripts. Sure, but what, if we could use something else to
deploy packages for us?</p>
<!-- TEASER_END -->
<p>For a some time I've used <a class="reference external" href="https://pypi.python.org/pypi/bumpversion">bumpversion</a>
to keep track of new releases in code by automatically  tagging code in repository.
Still have to push the code, preferably wait for tests to complete, and then
upload all those different packages to pypi.</p>
<p>Luckily, there's <a class="reference external" href="http://travis-ci.org/">travis-ci.org</a>, with it's
<a class="reference external" href="http://docs.travis-ci.com/user/deployment/pypi/">deployment ability</a>.
Unfortunately, it's somewhat broken, because if you want to release your code
in wheel packages, it of course install wheel package, that is required by
setuptools to package your code into a wheel, but it does so system-wide.
And deployment is taking place from within virtualenv, which results in:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>error: invalid command 'bdist_wheel' while deploying package to pypi</p>
</div>
<p>Well, to counter this, you need to add wheel installation yourself, like this:</p>
<pre class="code yaml"><a id="rest_code_e63e54685d014d6ab00986c23ee9ad33-1" name="rest_code_e63e54685d014d6ab00986c23ee9ad33-1"></a><span class="nt">install</span><span class="p">:</span>
<a id="rest_code_e63e54685d014d6ab00986c23ee9ad33-2" name="rest_code_e63e54685d014d6ab00986c23ee9ad33-2"></a>    <span class="c1"># other installation steps</span>
<a id="rest_code_e63e54685d014d6ab00986c23ee9ad33-3" name="rest_code_e63e54685d014d6ab00986c23ee9ad33-3"></a>    <span class="c1"># manually install wheel for deployment</span>
<a id="rest_code_e63e54685d014d6ab00986c23ee9ad33-4" name="rest_code_e63e54685d014d6ab00986c23ee9ad33-4"></a>    <span class="p p-Indicator">-</span> <span class="s">"pip</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">wheel</span><span class="nv"> </span><span class="s">pylama</span><span class="nv"> </span><span class="s">--use-mirrors"</span>
</pre>
<p>After these changes, my deployment process got down to bumping code version with
bumpversion and pushing tags and code to github.</p>
</div>
    
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../pyramid_localize-010-released/" rel="prev" title="pyramid_localize 0.1.0 released">Previous post</a>
            </li>
            <li class="next">
                <a href="../how-to-redirect-user-around-your-website/" rel="next" title="How to redirect user around Your website?">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="http://blog.fizyk.net.pl/blog/deploying-python-packages-with-travis-ci/",
        disqus_title="Deploying python packages with travis-ci",
        disqus_identifier="cache/posts/2014-05-04-deploying-python-packages-with-travis-ci.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </div>

        </div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="http://blog.fizyk.net.pl/" title="Cases">Cases</a>
            </h1>
            
            <small>
                Also available in: 
                
            <li><a href="http://blog.fizyk.net.pl/pl/" rel="alternate" hreflang="pl">Polski</a></li>

            </small>
            
            <ul class="unstyled">
<li>
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    <img alt="Licencja Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png"></a>
<br>Ten utwór, autorstwa
<span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">
    Grzegorz Śliwiński</span>
jest dostępny na licencji
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    Creative Commons Uznanie autorstwa 3.0 Unported
</a>.</li>
            
                <li>
<a href="http://www.fizyk.net.pl/en">Homepage</a>
                </li>
<li>
<a href="../../archive/">Archives</a>
                </li>
<li>
<a href="../../tags/">Tags</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2021 <a href="mailto:fizyk~~fizyk.net.pl">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
        </div>
    </div>
    
            <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
