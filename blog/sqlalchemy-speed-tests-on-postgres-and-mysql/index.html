<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Another SQLAlchemy speed tests. This time with postgresql.">
<meta name="viewport" content="width=device-width">
<title>SQLAlchemy speed tests on postgres and mysql | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="../../pl/rss.xml">
<link rel="canonical" href="http://blog.fizyk.net.pl/blog/sqlalchemy-speed-tests-on-postgres-and-mysql/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SQLAlchemy speed tests on postgres and mysql</a></h1>

        <div class="meta" style="background-color: rgb(234, 234, 234); ">
        <span class="authordate">
            Posted: <time class="published" datetime="2013-08-29T20:27:50+02:00">29 8 2013 20:27</time>
               [<a href="index.rst" id="sourcelink">Source</a>]
        </span>
        <br><span class="tags">Tags: 
                    <a class="tag" href="../../tags/mysql/"><span>mysql</span></a>
                    <a class="tag" href="../../tags/postgresql/"><span>postgresql</span></a>
                    <a class="tag" href="../../tags/python/"><span>python</span></a>
                    <a class="tag" href="../../tags/sqlalchemy/"><span>sqlalchemy</span></a>
                </span>
                <br><span class="authordate">
            

        </span>
        </div>
    <div>
<p>10 months ago, I run sqlalchemy tests against mysql server on different mysql dialects. This time, I did the same, but for both postgres and mysql dialects.</p>
<!-- TEASER_END -->
<p>To run this tests I've chosen 6 dialects. 3 for postgres: <strong>psycopg2</strong>, <strong>pypostgresql</strong>, <strong>pg8000</strong> and 3 for mysql: <strong>mysqldb</strong> <em>(mysql-python)</em>, <strong>oursql</strong> and <strong>mysqlconnector</strong> <em>(mysql-connector-python)</em>. Out of these three, py-postgresql failed to install, as I run tests on python 2.7, and this connector requires at least python 3.1, and oursql failed during tests on Insert with rollback test on 100 objects.</p>
<p>The five tests were (same as on recent tests):</p>
<ul class="simple">
<li><p>Insert with rollback</p></li>
<li><p>Insert with commit</p></li>
<li><p>Select</p></li>
<li><p>Delete with rollback</p></li>
<li><p>Delete with commit</p></li>
</ul>
<p>Test tools used here are (mostly upgraded):</p>
<ul class="simple">
<li><p>python (CPython) 2.7.4 (on Ubuntu 13.04)</p></li>
<li><p>mysql 5.1.61 (hosted on megiteam.pl servers)</p></li>
<li><p>postgresql 9.2.4 (hosted on megiteam.pl servers)</p></li>
<li><p>sqlalchemy 0.8.2</p></li>
<li><p>oursql 0.9.3.1</p></li>
<li><p>mysql-connector-python 1.0.12</p></li>
<li><p>mysqldb 1.2.4</p></li>
<li><p>psycopg2 2.5.1</p></li>
<li><p>pg8000 1.08</p></li>
</ul>
<p>As previously, results favour MySQLdb, but this time, it goes head to head with psycopg2. There isn't much difference between these two (except when deleting) and giving, that postgresql gained recently more features, and few more are getting brewed, I think I found my new database engine of choice. But pg8000 is something that I'd avoid.</p>
<section id="test-results"><h2>Test results</h2>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.077</p></td>
<td><p>0.316</p></td>
<td><p>2.884</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.325</p></td>
<td><p>1.432</p></td>
<td><p>12.360</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.109</p></td>
<td><p>0.316</p></td>
<td><p>2.795</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.093</p></td>
<td><p>0.542</p></td>
<td><p>5.737</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>0.115</p></td>
<td><p>0.545</p></td>
<td><p>ERROR</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with rollback</p>
<p>psycopg2 performance is comparable with MySQLdb. pg8000 is definitely something I will not use.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.085</p></td>
<td><p>0.325</p></td>
<td><p>3.141</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.497</p></td>
<td><p>1.653</p></td>
<td><p>12.278</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.067</p></td>
<td><p>0.327</p></td>
<td><p>3.055</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.105</p></td>
<td><p>0.587</p></td>
<td><p>5.283</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with commit</p>
<p>MySQLdb is the fastest connector when inserting and committing objects. But psycopg2 is close behind.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.028</p></td>
<td><p>0.062</p></td>
<td><p>0.318</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.135</p></td>
<td><p>0.147</p></td>
<td><p>0.438</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.052</p></td>
<td><p>0.066</p></td>
<td><p>0.336</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.073</p></td>
<td><p>0.095</p></td>
<td><p>0.314</p></td>
</tr>
</tbody>
</table>
<p>Table:  Select</p>
<p>For simple select psycopg2 performed best out of all. MySQLdb closes to psycopg2 on selecting more objects, and Connector is close by.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.048</p></td>
<td><p>0.051</p></td>
<td><p>0.057</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.224</p></td>
<td><p>0.235</p></td>
<td><p>0.236</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.084</p></td>
<td><p>0.071</p></td>
<td><p>0.257</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.112</p></td>
<td><p>0.127</p></td>
<td><p>0.370</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with rollback</p>
<p>When it comes to reverting delete operation, postgresql should be your choice. No matter how many object, it still performed almost the same amount of time. Andy psycopg2 shines amongst all other connectors.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.104</p></td>
<td><p>0.116</p></td>
<td><p>0.136</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.286</p></td>
<td><p>0.241</p></td>
<td><p>0.386</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.069</p></td>
<td><p>0.100</p></td>
<td><p>0.230</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.092</p></td>
<td><p>0.116</p></td>
<td><p>0.102</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with commit</p>
<p>When committing delete operations, MySQLdb is best for single objects. But still regresses a lot, when the number of objects increases. As if there was no difference between rollback and commit. And there's only place, where Connector gets ahead of MySQLdb. postgres connectors are almost as steady as with roll-back, although committing seems to be taking twice that time as rollback</p>
</section>
</div>
    
        <ul class="pager hidden-print">
<li class="previous">
                <a href="../powerline-shell-beautify-your-shell/" rel="prev" title="Powerline-shell - beautify your shell">Previous post</a>
            </li>
            <li class="next">
                <a href="../pytest_sauce-a-helpful-companion-to-your-selenium-tests-written-in-pytest/" rel="next" title="pytest_sauce, a helpful companion to your selenium tests written in pytest">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="http://blog.fizyk.net.pl/blog/sqlalchemy-speed-tests-on-postgres-and-mysql/",
        disqus_title="SQLAlchemy speed tests on postgres and mysql",
        disqus_identifier="cache/posts/2013-08-29-sqlalchemy-speed-tests-on-postgres-and-mysql.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </div>

        </div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="http://blog.fizyk.net.pl/" title="Cases">Cases</a>
            </h1>
            
            <small>
                Also available in: 
                
            <li><a href="http://blog.fizyk.net.pl/pl/" rel="alternate" hreflang="pl">Polski</a></li>

            </small>
            
            <ul class="unstyled">
<li>
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    <img alt="Licencja Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png"></a>
<br>Ten utwór, autorstwa
<span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">
    Grzegorz Śliwiński</span>
jest dostępny na licencji
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    Creative Commons Uznanie autorstwa 3.0 Unported
</a>.</li>
            
                <li>
<a href="http://www.fizyk.net.pl/en">Homepage</a>
                </li>
<li>
<a href="../../archive/">Archives</a>
                </li>
<li>
<a href="../../tags/">Tags</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2021 <a href="mailto:fizyk~~fizyk.net.pl">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
        </div>
    </div>
    
            <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
