<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Another SQLAlchemy speed tests. This time with postgresql.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SQLAlchemy speed tests on postgres and mysql | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" hreflang="en" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" hreflang="pl" href="../../pl/rss.xml">
<link rel="canonical" href="http://blog.fizyk.net.pl/blog/sqlalchemy-speed-tests-on-postgres-and-mysql/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Grzegorz Śliwiński">
<link rel="prev" href="../powerline-shell-beautify-your-shell/" title="Powerline-shell - beautify your shell" type="text/html">
<link rel="next" href="../pytest_sauce-a-helpful-companion-to-your-selenium-tests-written-in-pytest/" title="pytest_sauce, a helpful companion to your selenium tests written in pytest" type="text/html">
<meta property="og:site_name" content="Cases">
<meta property="og:title" content="SQLAlchemy speed tests on postgres and mysql">
<meta property="og:url" content="http://blog.fizyk.net.pl/blog/sqlalchemy-speed-tests-on-postgres-and-mysql/">
<meta property="og:description" content="Another SQLAlchemy speed tests. This time with postgresql.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-08-29T20:27:50+02:00">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="postgresql">
<meta property="article:tag" content="python">
<meta property="article:tag" content="sqlalchemy">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../">

            <span id="blog-title">Cases</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item"><a href="../../pl/" rel="alternate" hreflang="pl" class="nav-link">Polski</a></li>

                    
                    
    
    <li class="nav-item">
    <a href="index.rst" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="http://www.fizyk.net.pl/en" class="nav-link">Homepage</a>
                </li>
<li class="nav-item">
<a href="../../archive/" class="nav-link">Archives</a>
                </li>
<li class="nav-item">
<a href="../../tags/" class="nav-link">Tags</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SQLAlchemy speed tests on postgres and mysql</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Grzegorz Śliwiński
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2013-08-29T20:27:50+02:00" itemprop="datePublished" title="29 8 2013 20:27">29 8 2013 20:27</time></a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/2013-08-29-sqlalchemy-speed-tests-on-postgres-and-mysql.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>10 months ago, I run sqlalchemy tests against mysql server on different mysql dialects. This time, I did the same, but for both postgres and mysql dialects.</p>
<!-- TEASER_END -->
<p>To run this tests I've chosen 6 dialects. 3 for postgres: <strong>psycopg2</strong>, <strong>pypostgresql</strong>, <strong>pg8000</strong> and 3 for mysql: <strong>mysqldb</strong> <em>(mysql-python)</em>, <strong>oursql</strong> and <strong>mysqlconnector</strong> <em>(mysql-connector-python)</em>. Out of these three, py-postgresql failed to install, as I run tests on python 2.7, and this connector requires at least python 3.1, and oursql failed during tests on Insert with rollback test on 100 objects.</p>
<p>The five tests were (same as on recent tests):</p>
<ul class="simple">
<li><p>Insert with rollback</p></li>
<li><p>Insert with commit</p></li>
<li><p>Select</p></li>
<li><p>Delete with rollback</p></li>
<li><p>Delete with commit</p></li>
</ul>
<p>Test tools used here are (mostly upgraded):</p>
<ul class="simple">
<li><p>python (CPython) 2.7.4 (on Ubuntu 13.04)</p></li>
<li><p>mysql 5.1.61 (hosted on megiteam.pl servers)</p></li>
<li><p>postgresql 9.2.4 (hosted on megiteam.pl servers)</p></li>
<li><p>sqlalchemy 0.8.2</p></li>
<li><p>oursql 0.9.3.1</p></li>
<li><p>mysql-connector-python 1.0.12</p></li>
<li><p>mysqldb 1.2.4</p></li>
<li><p>psycopg2 2.5.1</p></li>
<li><p>pg8000 1.08</p></li>
</ul>
<p>As previously, results favour MySQLdb, but this time, it goes head to head with psycopg2. There isn't much difference between these two (except when deleting) and giving, that postgresql gained recently more features, and few more are getting brewed, I think I found my new database engine of choice. But pg8000 is something that I'd avoid.</p>
<section id="test-results"><h2>Test results</h2>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.077</p></td>
<td><p>0.316</p></td>
<td><p>2.884</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.325</p></td>
<td><p>1.432</p></td>
<td><p>12.360</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.109</p></td>
<td><p>0.316</p></td>
<td><p>2.795</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.093</p></td>
<td><p>0.542</p></td>
<td><p>5.737</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>0.115</p></td>
<td><p>0.545</p></td>
<td><p>ERROR</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with rollback</p>
<p>psycopg2 performance is comparable with MySQLdb. pg8000 is definitely something I will not use.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.085</p></td>
<td><p>0.325</p></td>
<td><p>3.141</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.497</p></td>
<td><p>1.653</p></td>
<td><p>12.278</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.067</p></td>
<td><p>0.327</p></td>
<td><p>3.055</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.105</p></td>
<td><p>0.587</p></td>
<td><p>5.283</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with commit</p>
<p>MySQLdb is the fastest connector when inserting and committing objects. But psycopg2 is close behind.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.028</p></td>
<td><p>0.062</p></td>
<td><p>0.318</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.135</p></td>
<td><p>0.147</p></td>
<td><p>0.438</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.052</p></td>
<td><p>0.066</p></td>
<td><p>0.336</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.073</p></td>
<td><p>0.095</p></td>
<td><p>0.314</p></td>
</tr>
</tbody>
</table>
<p>Table:  Select</p>
<p>For simple select psycopg2 performed best out of all. MySQLdb closes to psycopg2 on selecting more objects, and Connector is close by.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.048</p></td>
<td><p>0.051</p></td>
<td><p>0.057</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.224</p></td>
<td><p>0.235</p></td>
<td><p>0.236</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.084</p></td>
<td><p>0.071</p></td>
<td><p>0.257</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.112</p></td>
<td><p>0.127</p></td>
<td><p>0.370</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with rollback</p>
<p>When it comes to reverting delete operation, postgresql should be your choice. No matter how many object, it still performed almost the same amount of time. Andy psycopg2 shines amongst all other connectors.</p>
<table>
<colgroup>
<col style="width: 35%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 24%">
</colgroup>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.104</p></td>
<td><p>0.116</p></td>
<td><p>0.136</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.286</p></td>
<td><p>0.241</p></td>
<td><p>0.386</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.069</p></td>
<td><p>0.100</p></td>
<td><p>0.230</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.092</p></td>
<td><p>0.116</p></td>
<td><p>0.102</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with commit</p>
<p>When committing delete operations, MySQLdb is best for single objects. But still regresses a lot, when the number of objects increases. As if there was no difference between rollback and commit. And there's only place, where Connector gets ahead of MySQLdb. postgres connectors are almost as steady as with roll-back, although committing seems to be taking twice that time as rollback</p>
</section>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../tags/mysql/" rel="tag">mysql</a></li>
            <li><a class="tag p-category" href="../../tags/postgresql/" rel="tag">postgresql</a></li>
            <li><a class="tag p-category" href="../../tags/python/" rel="tag">python</a></li>
            <li><a class="tag p-category" href="../../tags/sqlalchemy/" rel="tag">sqlalchemy</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../powerline-shell-beautify-your-shell/" rel="prev" title="Powerline-shell - beautify your shell">Previous post</a>
            </li>
            <li class="next">
                <a href="../pytest_sauce-a-helpful-companion-to-your-selenium-tests-written-in-pytest/" rel="next" title="pytest_sauce, a helpful companion to your selenium tests written in pytest">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="http://blog.fizyk.net.pl/blog/sqlalchemy-speed-tests-on-postgres-and-mysql/",
        disqus_title="SQLAlchemy speed tests on postgres and mysql",
        disqus_identifier="cache/posts/2013-08-29-sqlalchemy-speed-tests-on-postgres-and-mysql.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="casesblog";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents © 2021 <a href="mailto:fizyk~~fizyk.net.pl">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
