<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>SQLAlchemy 0.9 dialects speed tests | Cases</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="../../pl/rss.xml">
<link rel="canonical" href="https://fizyk.dev/blog/sqlalchemy-09-dialects-speed-tests/">
<link rel="icon" href="../../favicon.png" sizes="62x60">
<link rel="icon" href="../../favicon-speddial.png" sizes="269x262">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
</head>
<body class="home blog">
    <div id="wrap" style="width:850px">
        <div id="container" style="width:560px">
            
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SQLAlchemy 0.9 dialects speed tests</a></h1>

        <div class="meta" style="background-color: rgb(234, 234, 234); ">
        <span class="authordate">
            Posted: <time class="published" datetime="2014-02-02T22:14:23+01:00">02 2 2014 22:14</time>
               [<a href="index.rst" id="sourcelink">Source</a>]
        </span>
        <br><span class="tags">Tags: 
                    <a class="tag" href="../../tags/mysql/"><span>mysql</span></a>
                    <a class="tag" href="../../tags/postgresql/"><span>postgresql</span></a>
                    <a class="tag" href="../../tags/python/"><span>python</span></a>
                    <a class="tag" href="../../tags/sqlalchemy/"><span>sqlalchemy</span></a>
                </span>
                <br><span class="authordate">
            

        </span>
        </div>
    <p>This fourth <a class="reference external" href="http://www.sqlalchemy.org/">SQLAlchemy's</a> dialects speed tests aims to test this ORM's newest version, 0.9.x, which is available for about a month already. This version, amongst other improvements, contains C extension for python3.</p>
<!-- TEASER_END -->
<p>There are six dialects tested like previously: 3 for postgres: <strong>psycopg2</strong>, <strong>pypostgresql</strong>, <strong>pg8000</strong> and 3 for mysql: <strong>mysqldb</strong> <em>(mysql-python)</em>, <strong>oursql</strong> and <strong>mysqlconnector</strong> <em>(mysql-connector-python)</em>.</p>
<p><strong>My basic setup:</strong></p>
<ul class="simple">
<li><p>System: <strong>Ubuntu 13.10 64bit</strong></p></li>
<li><p>Python: <strong>Python 2.7.5+</strong>/<strong>Python 3.3.2+</strong></p></li>
<li><p>SQLAlchemy: <strong>0.9.1</strong></p></li>
</ul>
<p><strong>Connectors versions used were:</strong></p>
<ul class="simple">
<li><p>oursql: <strong>0.9.3.1</strong></p></li>
<li><p>mysql-connector-python: <strong>1.1.4</strong> (<em>new</em>)</p></li>
<li><p>mysqldb: <strong>1.2.5</strong> (<em>new</em>)</p></li>
<li><p>psycopg2: <strong>2.5.2</strong> (<em>new</em>)</p></li>
<li><p>pg8000 <strong>1.9.4</strong> (<em>new</em>)</p></li>
<li><p>py-postgresql: <strong>1.1.0</strong></p></li>
</ul>
<p>Most major packages had seen patch updates since the last test, with mysql-connector-python seeing a minor update.</p>
<p><strong>Tests run, were the five tests as previously:</strong></p>
<ul class="simple">
<li><p>Insert with rollback</p></li>
<li><p>Insert with commit</p></li>
<li><p>Select</p></li>
<li><p>Delete with rollback</p></li>
<li><p>Delete with commit</p></li>
</ul>
<!-- note: --><p>I had to extend <strong>run.sh</strong> of my test suite script to facilitate the fact, that the mysql-connector-python is not hosted on pypi.</p>
<section id="test-results"><h2>Test results</h2>
<table>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.049</p></td>
<td><p>0.199</p></td>
<td><p>1.746</p></td>
</tr>
<tr>
<td><p>psycopg2 (py3)</p></td>
<td><p>0.048</p></td>
<td><p>0.202</p></td>
<td><p>1.762</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.194</p></td>
<td><p>0.746</p></td>
<td><p>6.450</p></td>
</tr>
<tr>
<td><p>pg8000 (py3)</p></td>
<td><p>0.196</p></td>
<td><p>0.760</p></td>
<td><p>6.397</p></td>
</tr>
<tr>
<td><p>py-postgresql (py3)</p></td>
<td><p>0.127</p></td>
<td><p>0.532</p></td>
<td><p>4.827</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.069</p></td>
<td><p>0.368</p></td>
<td><p>2.850</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.066</p></td>
<td><p>0.438</p></td>
<td><p>3.489</p></td>
</tr>
<tr>
<td><p>Connector (py3)</p></td>
<td><p>0.070</p></td>
<td><p>0.449</p></td>
<td><p>3.846</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>0.102</p></td>
<td><p>0.422</p></td>
<td><p>3.539</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with rollback</p>
<p>Like before, no real difference between python2 and python3 able connectors. With psycopg2 still the fastest of all (even mysql) and pg800 being about 50% slower than py-postgresql.
MySQLdb as usual leads within MySQL connectors, with Mysql-connector-python close by.</p>
<table>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.063</p></td>
<td><p>0.226</p></td>
<td><p>2.187</p></td>
</tr>
<tr>
<td><p>psycopg2 (py3)</p></td>
<td><p>0.113</p></td>
<td><p>0.392</p></td>
<td><p>1.979</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.227</p></td>
<td><p>1.119</p></td>
<td><p>6.682</p></td>
</tr>
<tr>
<td><p>pg8000 (py3)</p></td>
<td><p>0.331</p></td>
<td><p>0.815</p></td>
<td><p>6.632</p></td>
</tr>
<tr>
<td><p>py-postgresql (py3)</p></td>
<td><p>0.151</p></td>
<td><p>0.684</p></td>
<td><p>5.079</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.055</p></td>
<td><p>0.325</p></td>
<td><p>2.521</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.061</p></td>
<td><p>0.353</p></td>
<td><p>3.452</p></td>
</tr>
<tr>
<td><p>Connector (py3)</p></td>
<td><p>0.068</p></td>
<td><p>0.420</p></td>
<td><p>3.700</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>0.083</p></td>
<td><p>0.394</p></td>
<td><p>3.741</p></td>
</tr>
</tbody>
</table>
<p>Table:  Insert with commit</p>
<p>Not much different for insert with commit, although this operation is taking longer for all connectors. Oursql passed all tests this time.</p>
<table>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.019</p></td>
<td><p>0.029</p></td>
<td><p>0.118</p></td>
</tr>
<tr>
<td><p>psycopg2 (py3)</p></td>
<td><p>0.018</p></td>
<td><p>0.027</p></td>
<td><p>0.116</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.079</p></td>
<td><p>0.109</p></td>
<td><p>0.198</p></td>
</tr>
<tr>
<td><p>pg8000 (py3)</p></td>
<td><p>0.078</p></td>
<td><p>0.088</p></td>
<td><p>0.198</p></td>
</tr>
<tr>
<td><p>py-postgresql (py3)</p></td>
<td><p>0.046</p></td>
<td><p>0.059</p></td>
<td><p>0.139</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.026</p></td>
<td><p>0.035</p></td>
<td><p>0.119</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.036</p></td>
<td><p>0.043</p></td>
<td><p>0.133</p></td>
</tr>
<tr>
<td><p>Connector (py3)</p></td>
<td><p>0.036</p></td>
<td><p>0.045</p></td>
<td><p>0.140</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
</tr>
</tbody>
</table>
<p>Table:  Select test</p>
<p>Not much change since last time I presented results for this test, except  mysql-connector-python gets on-par between different python versions.</p>
<table>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.033</p></td>
<td><p>0.033</p></td>
<td><p>0.043</p></td>
</tr>
<tr>
<td><p>psycopg2 (py3)</p></td>
<td><p>0.032</p></td>
<td><p>0.032</p></td>
<td><p>0.040</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.163</p></td>
<td><p>0.164</p></td>
<td><p>0.180</p></td>
</tr>
<tr>
<td><p>pg8000 (py3)</p></td>
<td><p>0.163</p></td>
<td><p>0.180</p></td>
<td><p>0.171</p></td>
</tr>
<tr>
<td><p>py-postgresql (py3)</p></td>
<td><p>0.118</p></td>
<td><p>0.121</p></td>
<td><p>0.145</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.045</p></td>
<td><p>0.064</p></td>
<td><p>0.144</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.067</p></td>
<td><p>0.095</p></td>
<td><p>0.306</p></td>
</tr>
<tr>
<td><p>Connector (py3)</p></td>
<td><p>0.074</p></td>
<td><p>0.064</p></td>
<td><p>0.086</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with rollback</p>
<p>Again, quite an improvement for mysql-connector-python on python3 here. Other differences could be attributed to network.</p>
<table>
<thead><tr>
<th class="head"></th>
<th class="head"><p>s/run 1</p></th>
<th class="head"><p>s/run 10</p></th>
<th class="head"><p>s/run 100</p></th>
</tr></thead>
<tbody>
<tr>
<td><p>psycopg2</p></td>
<td><p>0.081</p></td>
<td><p>0.081</p></td>
<td><p>0.106</p></td>
</tr>
<tr>
<td><p>psycopg2 (py3)</p></td>
<td><p>0.046</p></td>
<td><p>0.049</p></td>
<td><p>0.058</p></td>
</tr>
<tr>
<td><p>pg8000</p></td>
<td><p>0.480</p></td>
<td><p>0.386</p></td>
<td><p>0.388</p></td>
</tr>
<tr>
<td><p>pg8000 (py3)</p></td>
<td><p>0.280</p></td>
<td><p>0.300</p></td>
<td><p>0.303</p></td>
</tr>
<tr>
<td><p>py-postgresql (py3)</p></td>
<td><p>0.152</p></td>
<td><p>0.156</p></td>
<td><p>0.229</p></td>
</tr>
<tr>
<td><p>MySQLdb</p></td>
<td><p>0.047</p></td>
<td><p>0.061</p></td>
<td><p>0.193</p></td>
</tr>
<tr>
<td><p>Connector</p></td>
<td><p>0.074</p></td>
<td><p>0.062</p></td>
<td><p>0.120</p></td>
</tr>
<tr>
<td><p>Connector (py3)</p></td>
<td><p>0.066</p></td>
<td><p>0.063</p></td>
<td><p>0.232</p></td>
</tr>
<tr>
<td><p>Oursql</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
<td><p>ERROR</p></td>
</tr>
</tbody>
</table>
<p>Table:  Delete with commit</p>
<p>When committing a delete operation, psycopg2 seems to perform better on python3 than python2.</p>
</section><section id="summarizing"><h2>Summarizing</h2>
<p>There are some overall improvements when it comes to mysql-connector-python performance, but still, MySQLdb takes the lead for MySQL connectors. Still postgres' psycopg2 seems to perform better in most cases, and works on python3 as well. Oursql made it one step further without any work on the package.</p>
<p>Surprisingly, there isn't any speedup I could attribute to SQLAlchemy's C extensions being enabled on python3, although, I was hoping for one. Mysql-connector-python could be rather attributed to some mjor work done to it.</p>
</section><section id="tests-code"><h2>Tests code</h2>
<p>Test code can be checked here <a class="reference external" href="https://github.com/fizyk/sqlalchemy-tests">github.com/fizyk/sqlalchemy-tests</a>. Requirement for it is to have virtualenvwrapper installed, and script itself should create clean envirtonments and install required dependeincies for tets.</p>
<p>Got some ideas on moving this code to py.test based tests with some logger fixture to produce pre-rendered reports.</p>
</section><ul class="pager hidden-print">
<li class="previous">
                <a href="../pyramid_fullauth-023/" rel="prev" title="pyramid_fullauth 0.2.3">Previous post</a>
            </li>
            <li class="next">
                <a href="../pylama-python-developers-helpful-companion/" rel="next" title="Pylama - Python developer's helpful companion">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="casesblog",
            disqus_url="https://fizyk.dev/blog/sqlalchemy-09-dialects-speed-tests/",
        disqus_title="SQLAlchemy 0.9 dialects speed tests",
        disqus_identifier="cache/posts/2014-02-02-sqlalchemy-09-dialects-speed-tests.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </div>

        </div>
        <div id="sidebar">
            <!--Sidebar content-->
            <h1 id="blog-title">
                <a href="https://fizyk.dev/" title="Cases">Cases</a>
            </h1>
            
            <small>
                Also available in: 
                
            <li><a href="https://fizyk.dev/pl/" rel="alternate" hreflang="pl">Polski</a></li>

            </small>
            
            <ul class="unstyled">
<li>
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    <img alt="Licencja Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png"></a>
<br>Ten utwór, autorstwa
<span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">
    Grzegorz Śliwiński</span>
jest dostępny na licencji
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.pl">
    Creative Commons Uznanie autorstwa 3.0 Unported
</a>.</li>
            
                <li>
<a href="https://fizyk.dev/">Homepage</a>
                </li>
<li>
<a href="../../archive/">Archives</a>
                </li>
<li>
<a href="../../tags/">Tags</a>

            </li>
<li>
            
            
            </ul>
</div>
        <div id="footer">
            Contents © 2025 <a href="mailto:fizyk~~fizyk.dev">Grzegorz Śliwiński</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
            
        </div>
    </div>
    
            <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20536007-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
